[debug] [2023-08-31T17:33:06.090Z] ----------------------------------------------------------------------
[debug] [2023-08-31T17:33:06.091Z] Command:       /opt/homebrew/Cellar/node@18/18.16.1_1/bin/node /opt/homebrew/bin/firebase deploy --only functions --debug
[debug] [2023-08-31T17:33:06.092Z] CLI Version:   12.5.2
[debug] [2023-08-31T17:33:06.092Z] Platform:      darwin
[debug] [2023-08-31T17:33:06.092Z] Node Version:  v18.16.1
[debug] [2023-08-31T17:33:06.093Z] Time:          Thu Aug 31 2023 12:33:06 GMT-0500 (Central Daylight Time)
[debug] [2023-08-31T17:33:06.093Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-08-31T17:33:06.129Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-08-31T17:33:06.129Z] > authorizing via signed-in user (emily@sturman.org)
[debug] [2023-08-31T17:33:06.129Z] [iam] checking project org-assistant for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-08-31T17:33:06.130Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/org-assistant:testIamPermissions [none]
[debug] [2023-08-31T17:33:06.131Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/org-assistant:testIamPermissions x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:06.131Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/org-assistant:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T17:33:06.310Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/org-assistant:testIamPermissions 200
[debug] [2023-08-31T17:33:06.311Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/org-assistant:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T17:33:06.311Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/org-assistant/serviceAccounts/org-assistant@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-08-31T17:33:06.311Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/org-assistant/serviceAccounts/org-assistant@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-08-31T17:33:06.493Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/org-assistant/serviceAccounts/org-assistant@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-08-31T17:33:06.494Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/org-assistant/serviceAccounts/org-assistant@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'org-assistant'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script. 
[debug] [2023-08-31T17:33:12.040Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/org-assistant [none]
[debug] [2023-08-31T17:33:12.303Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/org-assistant 200
[debug] [2023-08-31T17:33:12.303Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/org-assistant {"projectId":"org-assistant","projectNumber":"45876267496","displayName":"Org Assistant","name":"projects/org-assistant","resources":{"hostingSite":"org-assistant","storageBucket":"org-assistant.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_7018ce42-1764-4b51-bd5f-5ca79859bf6b"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-08-31T17:33:12.305Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/cloudfunctions.googleapis.com [none]
[debug] [2023-08-31T17:33:12.305Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:12.306Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/runtimeconfig.googleapis.com [none]
[debug] [2023-08-31T17:33:12.306Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:12.307Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/cloudbuild.googleapis.com [none]
[debug] [2023-08-31T17:33:12.307Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/cloudbuild.googleapis.com x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:12.308Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/artifactregistry.googleapis.com [none]
[debug] [2023-08-31T17:33:12.308Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/artifactregistry.googleapis.com x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:12.541Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/runtimeconfig.googleapis.com 200
[debug] [2023-08-31T17:33:12.541Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-08-31T17:33:12.542Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/cloudbuild.googleapis.com 200
[debug] [2023-08-31T17:33:12.542Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-08-31T17:33:12.542Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/artifactregistry.googleapis.com 200
[debug] [2023-08-31T17:33:12.542Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-08-31T17:33:12.574Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/cloudfunctions.googleapis.com 200
[debug] [2023-08-31T17:33:12.574Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-08-31T17:33:12.574Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/org-assistant/adminSdkConfig [none]
[debug] [2023-08-31T17:33:12.948Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/org-assistant/adminSdkConfig 200
[debug] [2023-08-31T17:33:12.948Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/org-assistant/adminSdkConfig {"projectId":"org-assistant","storageBucket":"org-assistant.appspot.com","locationId":"us-central"}
[debug] [2023-08-31T17:33:12.949Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/org-assistant/configs [none]
[debug] [2023-08-31T17:33:13.097Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/org-assistant/configs 200
[debug] [2023-08-31T17:33:13.098Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/org-assistant/configs {}
[debug] [2023-08-31T17:33:13.100Z] Validating nodejs source
[debug] [2023-08-31T17:33:13.447Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-08-31T17:33:13.448Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-08-31T17:33:13.448Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-08-31T17:33:13.452Z] Found firebase-functions binary at '/Users/emilysturman/Github/Org-Assistant/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8539

[debug] [2023-08-31T17:33:13.647Z] Got response from /__/functions.yaml {"endpoints":{"getEvents":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"getEvents"},"onCreateCheckIn":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"orgs/{orgId}/checkIns/{checkInId}"},"retry":false},"entryPoint":"onCreateCheckIn"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/emilysturman/Github/Org-Assistant/functions (91.49 KB) for uploading 
[debug] [2023-08-31T17:33:13.687Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/org-assistant/locations/-/functions [none]
[debug] [2023-08-31T17:33:14.086Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/org-assistant/locations/-/functions 200
[debug] [2023-08-31T17:33:14.087Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/org-assistant/locations/-/functions {"functions":[{"name":"projects/org-assistant/locations/us-central1/functions/function-1","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/org-assistant/databases/(default)/documents/orgs/{orgId}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"UNKNOWN","entryPoint":"onTest","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"org-assistant@appspot.gserviceaccount.com","updateTime":"2023-01-15T22:37:24.007Z","versionId":"4","labels":{"deployment-tool":"console-cloud"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-83453679590.us-central1.cloudfunctions.appspot.com/0cc40ab5-1d4f-4d00-a753-9e8482903a29.zip","runtime":"nodejs16","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"d75e4ff7-f157-413f-aae5-6cd78c3991fb","buildName":"projects/45876267496/locations/us-central1/builds/d75e4ff7-f157-413f-aae5-6cd78c3991fb","dockerRegistry":"CONTAINER_REGISTRY"},{"name":"projects/org-assistant/locations/us-central1/functions/function-2","httpsTrigger":{"url":"https://us-central1-org-assistant.cloudfunctions.net/function-2","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"helloWorld","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"org-assistant@appspot.gserviceaccount.com","updateTime":"2023-01-15T22:41:01.132Z","versionId":"1","labels":{"deployment-tool":"console-cloud"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-83453679590.us-central1.cloudfunctions.appspot.com/b4c4b567-c045-424b-8490-103f0d421ae9.zip","runtime":"nodejs16","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"d15eb88a-54ed-45a6-ae8d-32a9ca63e67b","buildName":"projects/45876267496/locations/us-central1/builds/d15eb88a-54ed-45a6-ae8d-32a9ca63e67b","dockerRegistry":"CONTAINER_REGISTRY"},{"name":"projects/org-assistant/locations/us-central1/functions/function-3","sourceRepository":{"url":"https://source.developers.google.com/projects/org-assistant/repos/default/moveable-aliases/master/paths/functions"},"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/org-assistant/databases/(default)/documents/orgs/{orgId}/events/{eventId}/checkIns/{checkInId}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"UNKNOWN","entryPoint":"onCheckInCreate","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"org-assistant@appspot.gserviceaccount.com","updateTime":"2023-01-15T22:41:48.350Z","versionId":"1","labels":{"deployment-tool":"console-cloud"},"runtime":"nodejs16","maxInstances":3000,"ingressSettings":"ALLOW_ALL","dockerRegistry":"CONTAINER_REGISTRY"},{"name":"projects/org-assistant/locations/us-central1/functions/getEvents","httpsTrigger":{"url":"https://us-central1-org-assistant.cloudfunctions.net/getEvents","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"getEvents","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"org-assistant@appspot.gserviceaccount.com","updateTime":"2023-02-22T22:34:08.938Z","versionId":"19","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6746eb8dc576843d452b8428e2df5e7339bd7283"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-83453679590.us-central1.cloudfunctions.appspot.com/f6a39f97-9b7b-4dcc-a7cb-6f7eede6b888.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"org-assistant\",\"storageBucket\":\"org-assistant.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"org-assistant","EVENTARC_CLOUD_EVENT_SOURCE":"projects/org-assistant/locations/us-central1/functions/getEvents"},"runtime":"nodejs16","ingressSettings":"ALLOW_ALL","buildId":"558c7889-25db-4868-b2a0-8eec7853a07e","buildName":"projects/45876267496/locations/us-central1/builds/558c7889-25db-4868-b2a0-8eec7853a07e","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/org-assistant/locations/us-central1/functions/on-checkin-create","sourceArchiveUrl":"gs://gcf-sources-45876267496-us-central1/onCreateCheckIn-c2ac0509-8a65-4139-88ed-d08f8eeaad70/version-8/function-source.zip","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/org-assistant/databases/(default)/documents/orgs/{orgId}/checkIns/{checkInId}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"UNKNOWN","entryPoint":"onCreateCheckIn","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"org-assistant@appspot.gserviceaccount.com","updateTime":"2023-01-15T22:25:17.441Z","versionId":"1","labels":{"deployment-tool":"console-cloud"},"runtime":"nodejs16","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"c4ff6598-a529-491c-a91b-b8c166f35c16","buildName":"projects/45876267496/locations/us-central1/builds/c4ff6598-a529-491c-a91b-b8c166f35c16","dockerRegistry":"CONTAINER_REGISTRY"},{"name":"projects/org-assistant/locations/us-central1/functions/onCreateCheckIn","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/org-assistant/databases/(default)/documents/orgs/{orgId}/checkIns/{checkInId}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"onCreateCheckIn","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"org-assistant@appspot.gserviceaccount.com","updateTime":"2023-02-22T22:34:08.921Z","versionId":"6","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"6746eb8dc576843d452b8428e2df5e7339bd7283"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-83453679590.us-central1.cloudfunctions.appspot.com/f6a39f97-9b7b-4dcc-a7cb-6f7eede6b888.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"org-assistant\",\"storageBucket\":\"org-assistant.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"org-assistant","EVENTARC_CLOUD_EVENT_SOURCE":"projects/org-assistant/locations/us-central1/functions/getEvents"},"runtime":"nodejs16","maxInstances":3000,"ingressSettings":"ALLOW_ALL","buildId":"558c7889-25db-4868-b2a0-8eec7853a07e","buildName":"projects/45876267496/locations/us-central1/builds/558c7889-25db-4868-b2a0-8eec7853a07e","dockerRegistry":"ARTIFACT_REGISTRY"}]}
[debug] [2023-08-31T17:33:14.100Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/org-assistant/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-08-31T17:33:14.540Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/org-assistant/locations/-/functions 200
[debug] [2023-08-31T17:33:14.540Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/org-assistant/locations/-/functions {}
[debug] [2023-08-31T17:33:14.542Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/org-assistant/databases/(default) [none]
[debug] [2023-08-31T17:33:14.720Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/org-assistant/databases/(default) 200
[debug] [2023-08-31T17:33:14.720Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/org-assistant/databases/(default) {"name":"projects/org-assistant/databases/(default)","uid":"54f28924-5237-43b4-b91b-85236fa4d77d","createTime":"2022-08-07T03:47:16.930270Z","updateTime":"2022-08-07T03:47:16.930270Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2023-08-31T16:33:14.734621Z","appEngineIntegrationMode":"ENABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IJC65IK3h4EDMLa/yLjm9oAD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2023-08-31T17:33:14.723Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/run.googleapis.com [none]
[debug] [2023-08-31T17:33:14.723Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/run.googleapis.com x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:14.726Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/eventarc.googleapis.com [none]
[debug] [2023-08-31T17:33:14.726Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/eventarc.googleapis.com x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:14.727Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/pubsub.googleapis.com [none]
[debug] [2023-08-31T17:33:14.727Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/pubsub.googleapis.com x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:14.728Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/storage.googleapis.com [none]
[debug] [2023-08-31T17:33:14.728Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/storage.googleapis.com x-goog-quota-user=projects/org-assistant
[debug] [2023-08-31T17:33:15.050Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/storage.googleapis.com 200
[debug] [2023-08-31T17:33:15.050Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[debug] [2023-08-31T17:33:15.051Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/pubsub.googleapis.com 200
[debug] [2023-08-31T17:33:15.051Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2023-08-31T17:33:15.052Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/run.googleapis.com 200
[debug] [2023-08-31T17:33:15.052Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2023-08-31T17:33:15.053Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/eventarc.googleapis.com 200
[debug] [2023-08-31T17:33:15.053Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/org-assistant/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2023-08-31T17:33:15.053Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/45876267496/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2023-08-31T17:33:15.055Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/45876267496/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2023-08-31T17:33:15.546Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/45876267496/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2023-08-31T17:33:15.547Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/45876267496/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-45876267496@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"103325475268080008609"}}
[debug] [2023-08-31T17:33:15.869Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/45876267496/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2023-08-31T17:33:15.870Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/45876267496/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-45876267496@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"102435830207987664570"}}
[debug] [2023-08-31T17:33:15.873Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/45876267496:getIamPolicy [none]
[debug] [2023-08-31T17:33:16.201Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/45876267496:getIamPolicy 200
[debug] [2023-08-31T17:33:16.201Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/45876267496:getIamPolicy {"version":1,"etag":"BwYEOuKt63s=","bindings":[{"role":"roles/appengine.serviceAgent","members":["serviceAccount:service-45876267496@gcp-gae-service.iam.gserviceaccount.com"]},{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-45876267496@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:45876267496@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-45876267496@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-45876267496@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-45876267496@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:45876267496-compute@developer.gserviceaccount.com","serviceAccount:org-assistant@appspot.gserviceaccount.com","user:emily@sturman.org"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-45876267496@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-ajezk@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-ajezk@org-assistant.iam.gserviceaccount.com","serviceAccount:github-action-524710378@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/firebasehosting.admin","members":["serviceAccount:github-action-524710378@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-45876267496@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-45876267496@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-ajezk@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:ColeWeinman@gmail.com"]},{"role":"roles/pubsub.serviceAgent","members":["serviceAccount:service-45876267496@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-45876267496@serverless-robot-prod.iam.gserviceaccount.com"]},{"role":"roles/run.viewer","members":["serviceAccount:github-action-524710378@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/serviceusage.apiKeysViewer","members":["serviceAccount:github-action-524710378@org-assistant.iam.gserviceaccount.com"]}]}
[debug] [2023-08-31T17:33:16.204Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/45876267496:setIamPolicy [none]
[debug] [2023-08-31T17:33:16.205Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/45876267496:setIamPolicy {"policy":{"version":1,"etag":"BwYEOuKt63s=","bindings":[{"role":"roles/appengine.serviceAgent","members":["serviceAccount:service-45876267496@gcp-gae-service.iam.gserviceaccount.com"]},{"role":"roles/artifactregistry.serviceAgent","members":["serviceAccount:service-45876267496@gcp-sa-artifactregistry.iam.gserviceaccount.com"]},{"role":"roles/cloudbuild.builds.builder","members":["serviceAccount:45876267496@cloudbuild.gserviceaccount.com"]},{"role":"roles/cloudbuild.serviceAgent","members":["serviceAccount:service-45876267496@gcp-sa-cloudbuild.iam.gserviceaccount.com"]},{"role":"roles/cloudfunctions.serviceAgent","members":["serviceAccount:service-45876267496@gcf-admin-robot.iam.gserviceaccount.com"]},{"role":"roles/containerregistry.ServiceAgent","members":["serviceAccount:service-45876267496@containerregistry.iam.gserviceaccount.com"]},{"role":"roles/editor","members":["serviceAccount:45876267496-compute@developer.gserviceaccount.com","serviceAccount:org-assistant@appspot.gserviceaccount.com","user:emily@sturman.org"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-45876267496@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-ajezk@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-ajezk@org-assistant.iam.gserviceaccount.com","serviceAccount:github-action-524710378@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/firebasehosting.admin","members":["serviceAccount:github-action-524710378@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-45876267496@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-45876267496@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-ajezk@org-assistant.iam.gserviceaccount.com","serviceAccount:service-45876267496@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:ColeWeinman@gmail.com"]},{"role":"roles/pubsub.serviceAgent","members":["serviceAccount:service-45876267496@gcp-sa-pubsub.iam.gserviceaccount.com"]},{"role":"roles/run.serviceAgent","members":["serviceAccount:service-45876267496@serverless-robot-prod.iam.gserviceaccount.com"]},{"role":"roles/run.viewer","members":["serviceAccount:github-action-524710378@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/serviceusage.apiKeysViewer","members":["serviceAccount:github-action-524710378@org-assistant.iam.gserviceaccount.com"]},{"role":"roles/run.invoker","members":["serviceAccount:45876267496-compute@developer.gserviceaccount.com"]},{"role":"roles/eventarc.eventReceiver","members":["serviceAccount:45876267496-compute@developer.gserviceaccount.com"]}]},"updateMask":"bindings"}
[debug] [2023-08-31T17:33:16.488Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/45876267496:setIamPolicy 403
[debug] [2023-08-31T17:33:16.489Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/45876267496:setIamPolicy {"error":{"code":403,"message":"Policy update access denied.","status":"PERMISSION_DENIED"}}
[warn] i  functions: Failed to verify the project has the correct IAM bindings for a successful deployment. 
[warn] i  functions: You can either re-run `firebase deploy` as a project owner or manually run the following set of `gcloud` commands: 
[warn] i  functions: `gcloud projects add-iam-policy-binding org-assistant --member=serviceAccount:service-45876267496@gcp-sa-pubsub.iam.gserviceaccount.com --role=roles/iam.serviceAccountTokenCreator` 
[warn] i  functions: `gcloud projects add-iam-policy-binding org-assistant --member=serviceAccount:45876267496-compute@developer.gserviceaccount.com --role=roles/run.invoker` 
[warn] i  functions: `gcloud projects add-iam-policy-binding org-assistant --member=serviceAccount:45876267496-compute@developer.gserviceaccount.com --role=roles/eventarc.eventReceiver` 
[debug] [2023-08-31T17:33:16.554Z] FirebaseError: HTTP Error: 403, Policy update access denied.
    at responseToError (/opt/homebrew/lib/node_modules/firebase-tools/lib/responseToError.js:49:12)
    at RetryOperation._fn (/opt/homebrew/lib/node_modules/firebase-tools/lib/apiv2.js:285:77)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[error] 
[error] Error: We failed to modify the IAM policy for the project. The functions deployment requires specific roles to be granted to service agents, otherwise the deployment will fail.
